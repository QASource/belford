
////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//Following is what Scripts does-If user has used Deal
//1)Sign In into the application
//2)User will move to Deals List page and after that will click on MyDeals Button.
//3)User will go to My Deals Section.
//4)Click on Used section.
//5)Find the Deal and clicked on it
//6)User will moved to voucher code section,confirm that amount has been used successfully message is displayed
////////////////////////////////////////////////////////////////////////////////////////////////////////////////

package com.qa.scripts;

import org.testng.Assert;
import org.testng.annotations.Test;

import com.qa.Functions.common.CommonUtils;
import com.qa.Functions.webdriver.UIEvents;
import com.qa.ReusableActions.ReusableActions;

public class ConfirmVoucherUsedAmount extends SetupScript{
	
	@Test(description="Verfiy that 'amount has been successfully used message' is displayed for the Used Deal", groups="SmokeTest")	
	public void usedDealVoucherDate() throws Exception

	{

		ReusableActions.accountSignIn(driver, CommonUtils.readIni("TestData.ini", "UserName"), CommonUtils.readIni("TestData.ini", "Password"));
		
		//Click 'Update' button on Refine page
		ReusableActions.RefineFilter(driver, CommonUtils.readIni("TestData.ini", "CITY"), CommonUtils.readIni("TestData.ini", "CATEGORY"));
		
		//System is waiting for seconds specified
	     CommonUtils.waitForChangesToReflect(CommonUtils.toInt(CommonUtils.readIni("Environment.ini", "DELAY")));
	    System.out.println("Validated that your are login into Deals list page");
	    
	    
	    // click on My Deals button
	    UIEvents.click(driver,CommonUtils.readIni("Repository.ini", "mydeal_btn"));
		System.out.println(" Welcome you are *Ready to use* your items");
		
		//System is waiting for seconds specified
		CommonUtils.waitForChangesToReflect(CommonUtils.toInt(CommonUtils.readIni("Environment.ini", "DELAY")));
	     
		//click on Used Button
		 UIEvents.click(driver,CommonUtils.readIni("Repository.ini", "used_btn"));
		
		 //System is waiting for seconds specified
		 CommonUtils.waitForChangesToReflect(CommonUtils.toInt(CommonUtils.readIni("Environment.ini", "DELAY")));
		
		 //Clicked on Used the Deal
		 UIEvents.click(driver,CommonUtils.readIni("Repository.ini", "used_valid"));
		 
		 //System is waiting for seconds specified
		 CommonUtils.waitForChangesToReflect(CommonUtils.toInt(CommonUtils.readIni("Environment.ini", "DELAY")));
		 
		 //Confirm that Amount has been successfully used message is displayed
		 Assert.assertNotNull(UIEvents.waitForElement(driver, CommonUtils.readIni("Repository.ini", "voucher_amount")));
	}



}
