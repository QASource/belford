package com.qa.scripts;
import java.io.File;
import com.qa.Functions.common.*;
import org.testng.annotations.*;
import org.openqa.selenium.firefox.FirefoxDriver;
import org.openqa.selenium.firefox.FirefoxProfile;
import org.openqa.selenium.remote.RemoteWebDriver;
/**
 * @author Tarun
 *
 */
public class SetupScript {
	public static RemoteWebDriver driver;
	
	@BeforeTest
	public void getDriver()
	{
/*		try{
			DesiredCapabilities capabillities = new DesiredCapabilities(
                    "firefox", "4", Platform.VISTA);
                 capabillities.setCapability("firefox-profile-url", "ftp://torbert:Torb3rt!2@203.193.132.44/Mobile.zip");
                 capabillities.setCapability("name",this.getClass().toString());
                 driver = new RemoteWebDriver(
                    new URL("http://qatest2:3dceb018-5de1-4562-886e-80974235fb8e@ondemand.saucelabs.com:80/wd/hub"),
                    capabillities);
			driver.get(CommonUtils.readIni("Environment.ini", "URL"));
			CommonUtils.waitForChangesToReflect(CommonUtils.toInt(CommonUtils.readIni("Environment.ini", "DELAY")));
		}
		
		catch (Exception e){
			System.out.println("Could not get the driver");
		}*/
		
	  	String str_FirefoxProfilePath =System.getProperty("user.dir")+"\\WapProfile";
		File FirefoxTempate= new File(str_FirefoxProfilePath);	

		FirefoxProfile profile =new	FirefoxProfile(FirefoxTempate);
		driver = new FirefoxDriver(profile);
		driver.get(CommonUtils.readIni("Environment.ini", "URL"));
//		CommonUtils.waitForChangesToReflect(CommonUtils.toInt(CommonUtils.readIni("Environment.ini", "DELAY")));

	}

	@AfterTest
	public void quitDriver() 
	{
		//System is waiting for seconds specified
		try{
			driver.get(CommonUtils.readIni("Environment.ini","LogoutURL"));
			CommonUtils.waitForChangesToReflect(CommonUtils.toInt(CommonUtils.readIni("Environment.ini", "INTERVAL")));
		}
		catch (Exception e){
			System.out.println(" going to quit driver");
			 
		}
		driver.quit();
	}
	
}
