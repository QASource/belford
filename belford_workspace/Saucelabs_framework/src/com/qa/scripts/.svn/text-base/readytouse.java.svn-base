package com.qa.scripts;

import org.openqa.selenium.By;
import org.testng.Assert;
import org.testng.annotations.Test;

import com.qa.Functions.common.CommonUtils;
import com.qa.Functions.webdriver.UIEvents;
import com.qa.ReusableActions.ReusableActions;

public class readytouse extends SetupScript{
	
	

	@Test(description="Verify that Deals are Ready to Use in your My Deals Section", groups="SmokeTest")	
	public void readyuse() throws Exception

	{

		ReusableActions.accountSignIn(driver, CommonUtils.readIni("TestData.ini", "UserName"), CommonUtils.readIni("TestData.ini", "Password"));
		
		//Click 'Update' button on Refine page
		ReusableActions.RefineFilter(driver, CommonUtils.readIni("TestData.ini", "CITY"), CommonUtils.readIni("TestData.ini", "CATEGORY"));
		
		//System is waiting for seconds specified
	     CommonUtils.waitForChangesToReflect(CommonUtils.toInt(CommonUtils.readIni("Environment.ini", "DELAY")));
	    System.out.println("Validated that your are login into Deals list page");
	    // click on My Deals button
	    UIEvents.click(driver,CommonUtils.readIni("Repository.ini", "mydeal_btn"));
		
        System.out.println(" Welcome you are *Ready to use* your items");
        UIEvents.click(driver,CommonUtils.readIni("Repository.ini", "readytouse"));
		
		CommonUtils.waitForChangesToReflect(CommonUtils.toInt(CommonUtils.readIni("Environment.ini", "DELAY")));
		 // Validation that user is now moved to My Deals page
		Assert.assertNotNull(driver.findElement(By.xpath(CommonUtils.readIni("Repository.ini", "readytouse_valid"))));
		
	}
	

}
