package com.qa.scripts;

import com.qa.Functions.common.*;
import org.testng.Assert;
import org.testng.annotations.*;
import com.thoughtworks.selenium.*;

/**
 * @author tarun
 * @see The script is the set up script which contains the functions which needs to be executed before and after running each test case.
 *
 */
public class SauceWithSelenium1 {
	public static DefaultSelenium selenium;

	@BeforeTest
	@Parameters({"browser"})
	public void getDriver(String browser)
	{
		String strUserName=CommonUtils.readIni("Environment.ini", "str_SauceLabUser");
		String strAPIKey=CommonUtils.readIni("Environment.ini", "str_SauceLabUserKey");
		
			try{
				if(browser.equalsIgnoreCase("Firefox"))
				{
					selenium = new DefaultSelenium(
			                "ondemand.saucelabs.com",
			                80,
			                "{\"username\": \""+strUserName+"\"," +
			                "\"access-key\": \""+strAPIKey+"\"," +
			                "\"os\": \"Windows 2003\"," +
			                "\"browser\": \"firefox\"," +
			                "\"browser-version\": \"3.6.\",",
			                CommonUtils.readIni("Environment.ini", "URL"));
				}
				if(browser.equalsIgnoreCase("IE"))
				{
					selenium = new DefaultSelenium(
			                "ondemand.saucelabs.com",
			                80,
			                "{\"username\": \"qatorbert23\"," +
			                "\"access-key\": \"654b56a1-c98f-4a63-a342-a747e9d6fbf0\"," +
			                "\"os\": \"Windows 2003\"," +
			                "\"browser\": \"iexplore\"," +
			                "\"browser-version\": \"8\",",
			                CommonUtils.readIni("Environment.ini", "URL"));
				}	
				}

		catch (Exception e){
			System.out.println("Could not define the driver");
		}	
		selenium.start();
	}
	
	@Test
	public static void TestSelenium1()
	{
        selenium.open("/");
        Assert.assertEquals("Cross browser testing with Selenium - Sauce Labs", selenium.getTitle());
        CommonUtils.tcmsReport(1, 1, "p");
	}
	@AfterTest
	public static void quitDriver()
	{
		try
		{
			selenium.close();
		}
		catch(Exception E)
		{

		}
	}

}